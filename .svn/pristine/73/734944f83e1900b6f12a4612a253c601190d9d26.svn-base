# Lanqua - AI Language Tutoring Service

A voice-first language learning application that helps you practice speaking with an AI tutor. Get real-time feedback on grammar, vocabulary, and fluency.

## Features

- ğŸ™ï¸ **Voice Conversations** - Speak naturally and get AI responses in real-time
- ğŸ”Š **Listen-First Mode** - Hide AI text until audio finishes for immersive practice
- ğŸ“Š **Instant Feedback** - Get detailed analysis on grammar, vocabulary, and fluency
- ğŸ­ **Roleplay Scenarios** - Practice real-world situations (cafÃ©, job interview, etc.)
- ğŸ“š **Topic Discussions** - Guided conversations on various topics
- ğŸŒ **Translation** - Instant translations powered by DeepL
- ğŸ”§ **Customizable** - Choose your AI model, voice, and learning preferences

## Tech Stack

- **Framework**: Next.js 14+ with App Router
- **Language**: TypeScript
- **Styling**: Tailwind CSS + shadcn/ui
- **Database**: SQLite with Drizzle ORM
- **State**: Zustand with localStorage persistence
- **TTS**: Kokoro TTS (WebGPU) / Web Speech API
- **STT**: Web Speech Recognition API
- **AI**: OpenAI Chat/Assistants API
- **Translation**: DeepL API

## Getting Started

### Prerequisites

- Node.js 18+ 
- OpenAI API key
- DeepL API key (optional, for translation features)

### Installation

```bash
# Clone the repository
git clone https://github.com/yourusername/lanqua.git
cd lanqua

# Install dependencies
npm install

# Set up environment variables
cp .env.local.example .env.local
# Edit .env.local and add your API keys:
# - OPENAI_API_KEY=your_key_here
# - DEEPL_API_KEY=your_key_here (optional)

# Start the development server
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

## Project Structure

```
src/
â”œâ”€â”€ app/                    # Next.js App Router pages
â”‚   â”œâ”€â”€ api/               # API routes (chat, analyze, translate)
â”‚   â”œâ”€â”€ chat/[id]/         # Chat conversation page
â”‚   â”œâ”€â”€ settings/          # Settings page
â”‚   â””â”€â”€ page.tsx           # Home page
â”œâ”€â”€ components/            # React components
â”‚   â”œâ”€â”€ chat/             # Chat-related components
â”‚   â”œâ”€â”€ settings/         # Settings components
â”‚   â””â”€â”€ ui/               # shadcn/ui components
â”œâ”€â”€ lib/                   # Core libraries
â”‚   â”œâ”€â”€ ai/               # AI providers & context management
â”‚   â”œâ”€â”€ db/               # Database schema & queries
â”‚   â”œâ”€â”€ stt/              # Speech-to-text providers
â”‚   â”œâ”€â”€ translation/      # DeepL translation
â”‚   â””â”€â”€ tts/              # Text-to-speech providers
â”œâ”€â”€ stores/               # Zustand state stores
â””â”€â”€ types/                # TypeScript type definitions
```

## Configuration

### Environment Variables

| Variable | Required | Description |
|----------|----------|-------------|
| `OPENAI_API_KEY` | Yes | Your OpenAI API key |
| `DEEPL_API_KEY` | No | DeepL API key for translations |
| `DATABASE_URL` | No | SQLite database path (default: ./data/lanqua.db) |

### Settings

Configure in the Settings page:
- **Language**: Choose learning and native language
- **Voice**: Select TTS provider, voice, and speed
- **AI**: Pick AI provider and model
- **UI**: Toggle listen-first mode and theme

## API Routes

### POST /api/chat
Create chats and send messages.

```json
// Create chat
{ "action": "create", "topicType": "general" }

// Send message  
{ "action": "message", "chatId": "...", "content": "Hello!" }
```

### POST /api/analyze
Analyze user messages for grammar, vocabulary, and fluency.

```json
{ "chatId": "...", "messageId": "..." }
```

### POST /api/translate
Translate text using DeepL.

```json
{ "text": "Hello", "targetLanguage": "DE" }
```

## Browser Requirements

- Chrome 89+ (recommended for Kokoro TTS with WebGPU)
- Edge 89+
- Firefox 89+ (Web Speech fallback)
- Safari 15.4+ (Web Speech fallback)

## License

MIT
